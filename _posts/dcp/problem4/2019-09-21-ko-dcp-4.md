---
layout: post
title: "Daily Coding Problem #4"
ref: dcp-4
date: 2019-09-21 07:00:00
categories: DCP
published: true
tags: dcp
lang: ko
---

[Daily Coding Problem](https://www.dailycodingproblem.com)ì„ êµ¬ë…í•˜ë©´ ë§¤ì¼ í•œ ê°œì˜ ì½”ë”© ë¬¸ì œë¥¼ ì´ë©”ì¼ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤.

## **DCP #4**
ì´ ë¬¸ì œëŠ” Stripe ë©´ì ‘ì—ì„œ ë‚˜ì˜¨ ì§ˆë¬¸ì…ë‹ˆë‹¤.

ì •ìˆ˜ì˜ ë°°ì—´ì´ ì£¼ì–´ì¡Œì„ ë•Œ, ë¯¸í¬í•¨ë˜ì–´ ìˆëŠ” ì²« ë²ˆì§¸ ì–‘ìˆ˜ë¥¼ êµ¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ O(N)ì˜ ì‹œê°„ë³µì¡ë„ì™€ O(1)ì˜ ê³µê°„ë³µì¡ë„ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”. ë‹¤ì‹œ ë§í•´, **ë°°ì—´ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ”** ê°€ì¥ ë‚®ì€ ì–‘ìˆ˜ë¥¼ êµ¬í•˜ì„¸ìš”. ë°°ì—´ì€ 
ì¤‘ë³µëœ ìˆ˜ì™€ ìŒìˆ˜ë¥¼ í¬í•¨í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ë“¤ì–´, ì…ë ¥ìœ¼ë¡œ `[3, 4, -1, 1]`ê°€ ë“¤ì–´ì˜¤ë©´ `2`ë¥¼ ì¶œë ¥í•˜ê³ ,
 `[1, 2, 0]`ê°€ ë“¤ì–´ì˜¤ë©´ `3`ì„ ì¶œë ¥í•©ë‹ˆë‹¤.

ì¸í”Œë ˆì´ìŠ¤(in-place)ë¡œ ë°°ì—´ì„ ìˆ˜ì •í•´ë„ ë©ë‹ˆë‹¤.

[ì›ë¬¸ í™•ì¸](en-dcp-4.html#dcp4) 

<br>

## **ì½”ë“œ**
ì‹œê°„ë³µì¡ë„ / ê³µê°„ë³µì¡ë„

### O(n) / O(max(n, largest element in n))
```ruby
def dcp4(input)
    max = input.max                   # linear
    b = ([*1 .. max] - input)

    if b.empty?                       # constant
        return max+1 
    end

    b.first                           # constant
end
```

<br>

### O(n) / O(1)
```ruby
def dcp4(input)
    target = 1
    input.sort!                       # in-place sorting?

    input.each do |x|                 # linear
        next if x <= 0 or x == target - 1
        break if x != target

        if x == target
            target += 1
        end
    end

    target
end
```
<br>

## **ì„¤ëª…**

### O(n) / O(max(n, largest element in n))
ì²« ë²ˆì§¸ ì½”ë“œëŠ” set differenceë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

ë‘ ê°œì˜ set `A`ì™€ `B`ê°€ ìˆë‹¤ê³  ê°€ì • í•  ê²½ìš° `A - B`ë¥¼ í•˜ë©´ `B`ì—ëŠ” ì—†ê³  `A`ì— ìˆëŠ” ìš”ì†Œë“¤ë§Œ ë‚¨ê²Œëœë‹¤. ì˜ˆë¥¼ë“¤ì–´ `A = [1,2,3]`, `B = [2, 3]` ì¼ ë•Œ `A - B`ì˜ ê°’ì€ `[1]`ì´ ëœë‹¤. 

ì´ ë°©ë²•ì„ í† ëŒ€ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•´ë´¤ë‹¤.

```ruby
max = input.max
b = ([*1 .. max] - input)
```

ìš°ì„  `max`ì— ì£¼ì–´ì§„ ë°°ì—´ì—ì„œ ê°€ì¥ í° ìš”ì†Œë¥¼ ì°¾ì€ ë‹¤ìŒ `[1, 2, ..., max]`ì˜ ë°°ì—´(`A`)ì„ ë§Œë“ ë‹¤. 
ì—¬ê¸°ì„œ `A - ì£¼ì–´ì§„ ë°°ì—´`ì„ í•˜ë©´ ë°°ì—´ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê°€ì¥ ë‚®ì€ ì–‘ìˆ˜ê°€ `A` ì²« ë²ˆì§¸ ìš”ì†Œì— ì¡´ì¬í•˜ê²Œ ë˜ë¯€ë¡œ ì´ ê°’ì„ ë°˜í™˜í•˜ë©´ ëœë‹¤. 

ë‹¤ë§Œ ì£¼ì–´ì§„ ë°°ì—´ì´ `[1, 2, 3, 4]`ì²˜ëŸ¼ ì¤‘ê°„ì— ë¹„ì–´ìˆëŠ” ì–‘ìˆ˜ê°€ ì—†ì„ ê²½ìš° `A`ëŠ” ë¹ˆ ë°°ì—´ì´ê±°ë‚˜ ì²« ë²ˆì§¸ ìš”ì†Œê°€ `5`ê°€ ì•„ë‹ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í™•ì¸í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œ ë‹¤ìŒ ê°’ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤.

ì¼ë‹¨ ì´ ë°©ë²•ì€ ë¬¸ì œì˜ ìš”êµ¬ì¡°ê±´ ì¤‘ í•˜ë‚˜ì¸ O(1)ì˜ ê³µê°„ë³µì¡ë„ë¥¼ ì¶©ì¡±í•˜ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— ì‹¤íŒ¨ë‹¤.

ë‹¨ìˆœíˆ ì¶©ì¡±í•˜ì§€ ëª»í•œ ê²ƒ ë¿ë§Œ ì•„ë‹ˆë¼ ìƒë‹¹íˆ ë¹„íš¨ìœ¨ì ì´ë‹¤. ì˜ˆë¥¼ë“¤ì–´ ì…ë ¥ ë°°ì—´ì´ `[1, 10ì–µ]`ì¼ ê²½ìš°, ë‹¨ ë‘ ê°œì˜ ê°’ì´ ë“¤ì–´ìˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  í¬ê¸° `10ì–µ`ì˜ ë°°ì—´ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì¼ë‹¨ ëŒ€ì¶© ìƒê°í•´ë´ë„ í¬ê¸°ê°€ ë„ˆë¬´ ì»¤ì„œ ìŠ¤íƒì— ë‹¤ ë‹´ì„ ìˆ˜ ì—†ë‹¤ëŠ” ê±¸ ì•Œì§€ë§Œ, í•œ ë²ˆ ì‹œë„í•´ ë´¤ë‹¤.

![Memory](/assets/images/dcp/problem4/memory.png)

ì‚¬ì§„ë§Œ ë´ì„œëŠ” "ì•„ ì—ëŸ¬ê°€ ë‚¬êµ¬ë‚˜"í•˜ê³  ì§€ë‚˜ê°€ë©´ ë  ê²ƒ ê°™ì§€ë§Œ, ê°„ë‹¨í•œ ë¬¸ì œê°€ ì•„ë‹ˆë‹¤.
ì‹¤ì œë¡œëŠ” 10ì–µê°œ ë§Œë“¤ë‹¤ ì»´í“¨í„° ë‚ ë¼ê°€ëŠ” ì¤„ ì•Œì•˜ë‹¤ğŸ’¢

<br>

### O(n) / O(1)
ì‹œê°„ë³µì¡ë„ ë©´ì—ì„œëŠ” í†µê³¼ì´ì§€ë§Œ ê³µê°„ë³µì¡ë„ê°€ ë¬¸ì œì¸ë°.. ì¶”ê°€ì ì¸ ë°°ì—´ì—†ì´ ì–´ë–»ê²Œ í•´ê²° í•  ìˆ˜ ìˆì„ê¹Œ?

ë°°ì—´ì´ ì •ë ¬ì´ ë˜ì–´ìˆëŠ” ìƒíƒœë¼ë©´ ìƒë‹¹íˆ ê°„ë‹¨í•˜ë‹¤. ê·¸ëƒ¥ `1`ë¶€í„° ì‹œì‘í•´ì„œ í•˜ë‚˜í•˜ë‚˜ í™•ì¸í•˜ë©´ ë˜ë‹ˆê¹Œ.
í•˜ì§€ë§Œ ë¹„ì •ë ¬ì´ê¸° ë•Œë¬¸ì— ì •ë ¬ì„ í•˜ë ¤ë©´ (ì •ë ¬ì—†ì´ í•˜ëŠ” ë°©ë²•ì€ ëª¨ë¥´ê² ë‹¤) ì •ë ¬ ì¤‘ì—ì„œë„ ì¶”ê°€ì ì¸ ê³µê°„ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” in-place ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

ë£¨ë¹„ì˜ `sort!`ë¥¼ ë³´ë©´ in-placeì¸ ê²ƒ ê°™ì•„ì„œ ì¼ë‹¨ ì‚¬ìš©ì€ í–ˆë‹¤. ë§Œì•½ ì•„ë‹ˆë©´ ì§ì ‘ êµ¬í˜„í•˜ë©´ ë˜ë‹ˆ
ë”±íˆ ë¬¸ì œëŠ” ì—†ë‹¤ê³  ìƒê°ëœë‹¤.

```c
/* sort!() */
/* https://apidock.com/ruby/v2_5_5/Array/sort! */
VALUE
rb_ary_sort_bang(VALUE ary)
{
    rb_ary_modify(ary);
    assert(!ARY_SHARED_P(ary));
    if (RARRAY_LEN(ary) > 1) {
        VALUE tmp = ary_make_substitution(ary); /* only ary refers tmp */
        struct ary_sort_data data;
        long len = RARRAY_LEN(ary);

        RBASIC_CLEAR_CLASS(tmp);
        data.ary = tmp;
        data.cmp_opt.opt_methods = 0;
        data.cmp_opt.opt_inited = 0;
        RARRAY_PTR_USE(tmp, ptr, {
            ruby_qsort(ptr, len, sizeof(VALUE),
                       rb_block_given_p()?sort_1:sort_2, &data);
        }); /* WB: no new reference */
        rb_ary_modify(ary);
        if (ARY_EMBED_P(tmp)) {
            if (ARY_SHARED_P(ary)) { /* ary might be destructively operated in the given block */
                rb_ary_unshare(ary);
                FL_SET_EMBED(ary);
            }
            ary_memcpy(ary, 0, ARY_EMBED_LEN(tmp), ARY_EMBED_PTR(tmp));
            ARY_SET_LEN(ary, ARY_EMBED_LEN(tmp));
        }
        else {
            if (!ARY_EMBED_P(ary) && ARY_HEAP_PTR(ary) == ARY_HEAP_PTR(tmp)) {
                FL_UNSET_SHARED(ary);
                ARY_SET_CAPA(ary, RARRAY_LEN(tmp));
            }
            else {
                assert(!ARY_SHARED_P(tmp));
                if (ARY_EMBED_P(ary)) {
                    FL_UNSET_EMBED(ary);
                }
                else if (ARY_SHARED_P(ary)) {
                    /* ary might be destructively operated in the given block */
                    rb_ary_unshare(ary);
                }
                else {
                    ruby_sized_xfree((void *)ARY_HEAP_PTR(ary), ARY_HEAP_SIZE(ary));
                }
                ARY_SET_PTR(ary, RARRAY_CONST_PTR(tmp));
                ARY_SET_HEAP_LEN(ary, len);
                ARY_SET_CAPA(ary, RARRAY_LEN(tmp));
            }
            /* tmp was lost ownership for the ptr */
            FL_UNSET(tmp, FL_FREEZE);
            FL_SET_EMBED(tmp);
            ARY_SET_EMBED_LEN(tmp, 0);
            FL_SET(tmp, FL_FREEZE);
        }
        /* tmp will be GC'ed. */
        RBASIC_SET_CLASS_RAW(tmp, rb_cArray); /* rb_cArray must be marked */
    }
    return ary;
}
```

<br>

## **ê´€ë ¨ ê¸€**
{% assign tagParam = "dcp" %}
{% include related-posts %}